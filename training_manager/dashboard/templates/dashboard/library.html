{% extends "dashboard/base.html" %}

{% block title %}–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ ‚Äî Athletic Manager{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6">üé• –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –≤—ñ–¥–µ–æ</h2>

<!-- –§—ñ–ª—å—Ç—Ä -->
<form method="get" class="mb-6 flex gap-4 items-center">
    <label for="event" class="font-medium">–§—ñ–ª—å—Ç—Ä –∑–∞ —Ç–∏–ø–æ–º –ø–æ–¥—ñ—ó:</label>
    <select name="event" id="event" class="border px-3 py-2 rounded">
        <option value="">–£—Å—ñ</option>
        <option value="RUNNING" {% if filter_event == 'RUNNING' %}selected{% endif %}>–ë—ñ–≥</option>
        <option value="JUMPING" {% if filter_event == 'JUMPING' %}selected{% endif %}>–°—Ç—Ä–∏–±–∫–∏</option>
        <option value="THROWING" {% if filter_event == 'THROWING' %}selected{% endif %}>–ú–µ—Ç–∞–Ω–Ω—è/–®—Ç–æ–≤—Ö–∞–Ω–Ω—è</option>
    </select>
    <button type="submit" class="bg-blue-700 text-white px-4 py-2 rounded hover:bg-blue-800">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏</button>
</form>

<!-- –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó -->
{% if categories %}
    <div class="space-y-6">
        {% for cat in categories %}
            {% if cat.videos.all %}
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="text-lg font-semibold mb-2">{{ cat.get_attempt_type_display }} ‚Äì {{ cat.place }}, {{ cat.date }}</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
                        {% for video in cat.videos.all %}
                            <div class="border rounded p-4 shadow-sm">
                                <p><strong>–¢–∏–ø:</strong> {{ video.get_event_type_display }}</p>
                                <p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong> {{ video.result }}</p>
                                <p><strong>–°–ø—Ä–æ–±–∞ ‚Ññ:</strong> {{ video.attempt_number }}</p>
                                <p><strong>–ß–∞—Å:</strong> {{ video.time }}</p>
                                <video controls class="w-full mt-2 rounded">
                                    <source src="{{ video.video.url }}" type="video/mp4">
                                </video>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    </div>
{% else %}
    <p class="text-gray-600 italic">–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π –∞–±–æ –≤—ñ–¥–µ–æ.</p>
{% endif %}
{% endblock %}
