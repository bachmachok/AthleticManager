@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== Base ===== */
@layer base {
  html { scroll-behavior: smooth; }
  body { @apply bg-gray-50 text-gray-900 antialiased dark:bg-gray-900 dark:text-gray-100; }
  h1, h2, h3 { @apply font-extrabold tracking-tight text-gray-900 dark:text-white; }
  p { @apply text-gray-600 dark:text-gray-300; }
  a { @apply underline-offset-2 decoration-slate-300; }
}

/* ===== Components ===== */
@layer components {
  /* Layout helpers */
  .page-wrap  { @apply mx-auto max-w-7xl px-4 sm:px-6 lg:px-8; }
  .page-title { @apply text-3xl font-semibold mb-8; }
  .section    { @apply mt-8; }

  /* Badges */
  .badge {
    @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold
           bg-brand-100 text-brand-900 dark:bg-white/10 dark:text-white/90;
  }

  /* Cards */
  .card {
    @apply rounded-2xl ring-1 ring-gray-200/80 bg-white/90 shadow-soft
           dark:ring-white/10 dark:bg-white/5;
  }
  .card-body { @apply p-4 sm:p-6; }

  /* Buttons */
  .btn {
    @apply inline-flex items-center gap-2 rounded-lg px-3.5 py-2 text-sm font-medium
           transition shadow-sm focus:outline-none
           focus-visible:ring-2 focus-visible:ring-offset-2
           focus-visible:ring-brand-500 dark:focus-visible:ring-offset-gray-900;
  }
  .btn-primary {
    @apply btn bg-brand-600 text-white hover:bg-brand-700 active:bg-brand-800;
  }
  .btn-outline {
    @apply btn border border-brand-300 text-brand-700 hover:bg-brand-50;
  }
  .btn-ghost {
    @apply btn bg-transparent hover:bg-white/60 text-gray-900
           dark:hover:bg-white/10 dark:text-gray-100;
  }

  /* Sidebar + nav */
  .nav-link {
    @apply flex items-center gap-3 px-3 py-2 rounded-md transition
           hover:bg-white/10 focus-visible:bg-white/10 outline-none;
  }
  .nav-link-active {
    @apply bg-white/15 text-white shadow-inner ring-1 ring-white/20;
  }

  .sidebar { @apply transition-[width] duration-300; }
  .sb-top  { @apply flex items-center justify-between p-4 border-b border-white/10; }

  .logo-toggle {
    @apply relative inline-flex h-10 w-10 items-center justify-center rounded-lg
           bg-white/10 hover:bg-white/20 focus:outline-none focus-visible:ring-2
           focus-visible:ring-white/40;
  }
  .logo-toggle .ico-logo { @apply transition-opacity; }
  .logo-toggle .ico-menu {
    @apply absolute inset-0 grid place-items-center opacity-0 transition-opacity;
  }

  /* Sidebar collapsed (desktop rail) */
  .sidebar--collapsed { @apply w-20; }
  .sidebar--collapsed .sb-top { @apply flex-col items-center gap-2; }
  .sidebar--collapsed .brand-text { @apply hidden; }
  .sidebar--collapsed #menuToggle { @apply hidden; }
  .sidebar--collapsed .logo-toggle:hover .ico-logo { @apply opacity-0; }
  .sidebar--collapsed .logo-toggle:hover .ico-menu { @apply opacity-100; }
  .sidebar--collapsed .nav-link { @apply flex flex-col items-center gap-1 px-2 py-3 text-center; }
  .sidebar--collapsed .nav-link .nav-text  { @apply hidden; }
  .sidebar--collapsed .nav-link .nav-under { @apply block text-[10px] leading-tight opacity-90; }
  .sidebar.sidebar--collapsed > .user-block { @apply m-0 p-0 h-0 overflow-hidden; }

  /* Tables */
  .table { @apply w-full text-sm; }
  .table thead { @apply bg-gray-50 text-gray-600 dark:bg-white/5 dark:text-gray-300; }
  .table th, .table td { @apply px-4 py-2 align-middle; }
  .table tbody tr {
    @apply even:bg-gray-50/60 dark:even:bg-white/5
           hover:bg-gray-100/70 dark:hover:bg-white/10 transition;
  }
}

/* ===== Utilities ===== */
@layer utilities {
  .safe-tap { @apply min-h-[44px] min-w-[44px]; }

  @screen md {
    .layout-grid { display: grid; grid-template-columns: 18rem 1fr; }
    .layout-grid.layout-grid-collapsed { grid-template-columns: 5rem 1fr; }
  }

  @media (max-width: 767px) {
    .sidebar { width: 18rem; }
    .sidebar--collapsed { width: 18rem; }
  }
}
